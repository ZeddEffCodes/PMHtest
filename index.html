<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nordic Music Streaming Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #3c4043 0%, #ff4757 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .dashboard {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .header {
            background: linear-gradient(135deg, #3c4043 0%, #ff4757 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header-logos {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 25px;
        }

        .logo.tono {
            background: #E50012;
            border-radius: 12px;
            padding: 16px 24px;
            height: 70px;
            display: flex;
            align-items: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .controls {
            padding: 20px 30px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .control-group label {
            font-weight: 600;
            color: #495057;
            font-size: 0.9rem;
        }

        select, input {
            padding: 8px 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #3c4043;
            box-shadow: 0 0 0 3px rgba(60, 64, 67, 0.1);
        }

        .charts-container {
            padding: 10px 30px 30px;
        }

        .chart-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .chart-header {
            padding: 20px;
            background: linear-gradient(135deg, #3c4043 0%, #ff4757 100%);
            color: white;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .chart-content {
            padding: 0;
            height: auto;
            max-height: 600px;
            overflow-y: auto;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        .data-table th {
            background: #f8f9fa;
            color: #495057;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            font-size: 0.85rem;
            border-bottom: 2px solid #e9ecef;
        }

        .data-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e9ecef;
            font-size: 0.85rem;
        }

        .data-table tbody tr:hover {
            background: #f8f9fa;
        }

        .rank-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            font-weight: 700;
            color: white;
            font-size: 0.9rem;
        }

        .rank-badge.top3 {
            background: linear-gradient(135deg, #ffd700, #ffed4a);
            color: #333;
        }

        .rank-badge.top10 {
            background: linear-gradient(135deg, #c0c0c0, #e8e8e8);
            color: #333;
        }

        .rank-badge.other {
            background: linear-gradient(135deg, #3c4043, #ff4757);
        }

        .momentum-bar {
            width: 100px;
            height: 6px;
            background: #e9ecef;
            border-radius: 3px;
            overflow: hidden;
            margin: 3px 0;
        }

        .momentum-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4757, #3c4043);
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        .artist-cell {
            font-weight: 600;
            color: #333;
        }

        .streams-cell {
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .control-group {
                width: 100%;
            }

            .data-table {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <div class="header-logos">
                <!-- Tono Logo -->
                <div class="logo tono">
                    <svg width="100" height="40" viewBox="0 0 100 40" xmlns="http://www.w3.org/2000/svg">
                        <text x="50" y="28" font-family="Poppins, sans-serif" font-size="20" font-weight="700" fill="white" text-anchor="middle">TONO</text>
                        <circle cx="50" cy="10" r="3" fill="white"/>
                    </svg>
                </div>
            </div>
            <h1>Nordic Spotify Streaming Analytics</h1>
            <p>Artist Momentum Rankings - TONO Repertoire Performance</p>
        </div>

        <div class="controls">
            <div class="control-group">
                <label for="artistFilter">Filter by Artist:</label>
                <select id="artistFilter">
                    <option value="">All Artists</option>
                </select>
            </div>
            <div class="control-group">
                <label for="minStreams">Min Total Streams:</label>
                <input type="number" id="minStreams" placeholder="e.g., 1000000">
            </div>
            <div class="control-group">
                <label for="minShare">Min Norway Share %:</label>
                <input type="number" id="minShare" placeholder="e.g., 10" step="0.1">
            </div>
            <div class="control-group">
                <label for="sortBy">Rank by:</label>
                <select id="sortBy">
                    <option value="momentum_composite_score">ðŸš€ Momentum Score</option>
                    <option value="total_current_streams">ðŸ“Š Total Streams</option>
                    <option value="norwegian_share_percent">ðŸ‡³ðŸ‡´ Norway Share %</option>
                    <option value="total_stream_growth">ðŸ“ˆ Stream Growth</option>
                </select>
            </div>
        </div>

        <div class="charts-container">
            <div class="chart-card">
                <div class="chart-header">Artist Momentum Rankings</div>
                <div class="chart-content">
                    <table class="data-table" id="dataTable">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Artist</th>
                                <th>Total Streams</th>
                                <th>Stream Growth</th>
                                <th>Momentum Score</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        let artistData = [];
        let filteredData = [];

        // CSV data embedded - exact order from spreadsheet
        const csvData = `artist,total_current_streams,total_stream_growth,artist_velocity,median_track_growth,momentum_composite_score,norwegian_share_percent,norwegian_stream_growth,international_stream_growth,tracks_with_growth
Tobias Sten,40253405,465232,1.1558,42750,0.94,83.0,386143,79089,9
Ari Bajgora,58378071,273683,0.4688,13720,0.37,83.0,227157,46526,10
Synne Vo,48203658,204509,0.4243,4203,0.31,83.0,169742,34767,10
Ida-Lova,47399874,174080,0.3673,4939,0.27,83.0,144486,29594,11
Fjellrev,88132279,149961,0.1702,13350,0.16,83.0,124468,25493,12
Peder B. Helland,270683793,389161,0.1438,30184,0.19,18.0,70049,319112,13
Marstein,95350883,130671,0.137,6307,0.11,82.9,108326,22345,14
SÃ¸te og Rare Gutter,111927423,150816,0.1347,3544,0.1,81.5,122915,27901,15
Golfklubb,152850978,180475,0.1181,14010,0.12,18.0,32486,147989,16
Kudos,100873354,105055,0.1041,5633,0.09,18.0,18910,86145,17
Ringnes-Ronny,208549846,115696,0.0555,10007,0.07,49.6,57385,58311,18
AURORA,2298784795,1229375,0.0535,64095,0.23,8.0,98350,1131025,19
Broiler,1350657614,604107,0.0447,5485,0.05,24.9,150423,453684,20
TIX,229501405,100914,0.044,8456,0.06,83.0,83759,17155,21
Madcon,1201422759,523621,0.0436,5509,0.05,18.0,94252,429369,22
Emma Steinbakken,356498527,155085,0.0435,4253,0.04,82.0,127170,27915,23
Alan Walker,7779605167,2686758,0.0345,202562,0.63,4.9,131651,2555107,24`;

        function parseCSV(csvString) {
            const lines = csvString.trim().split('\n');
            const headers = lines[0].split(',');
            const data = [];
            
            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split(',');
                const row = {};
                headers.forEach((header, index) => {
                    const value = values[index];
                    if (!isNaN(value) && value !== '') {
                        row[header] = parseFloat(value);
                    } else {
                        row[header] = value;
                    }
                });
                row.originalRank = i;
                data.push(row);
            }
            return data;
        }

        function formatNumber(num) {
            if (num >= 1000000000) {
                return (num / 1000000000).toFixed(1) + 'B';
            } else if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toString();
        }

        function getRankBadgeClass(rank) {
            if (rank <= 3) return 'top3';
            if (rank <= 10) return 'top10';
            return 'other';
        }

        function updateTable(data) {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';

            data.forEach((item, index) => {
                const row = document.createElement('tr');
                const rank = index + 1;
                
                row.innerHTML = `
                    <td>
                        <div class="rank-badge ${getRankBadgeClass(rank)}">${rank}</div>
                    </td>
                    <td class="artist-cell">${item.artist}</td>
                    <td class="streams-cell">${formatNumber(item.total_current_streams || 0)}</td>
                    <td class="streams-cell">+${formatNumber(item.total_stream_growth || 0)}</td>
                    <td>
                        <div style="display: flex; flex-direction: column; align-items: flex-start;">
                            <strong>${(item.momentum_composite_score || 0).toFixed(2)}</strong>
                            <div class="momentum-bar">
                                <div class="momentum-fill" style="width: ${(item.momentum_composite_score || 0) * 100}%"></div>
                            </div>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function populateArtistFilter(data) {
            const select = document.getElementById('artistFilter');
            const artists = [...new Set(data.map(item => item.artist))].sort();
            
            select.innerHTML = '<option value="">All Artists</option>';
            
            artists.forEach(artist => {
                const option = document.createElement('option');
                option.value = artist;
                option.textContent = artist;
                select.appendChild(option);
            });
        }

        function applyFilters() {
            const artistFilter = document.getElementById('artistFilter').value;
            const minStreams = parseInt(document.getElementById('minStreams').value) || 0;
            const minShare = parseFloat(document.getElementById('minShare').value) || 0;
            const sortBy = document.getElementById('sortBy').value;

            filteredData = artistData.filter(item => {
                return (!artistFilter || item.artist.toLowerCase().includes(artistFilter.toLowerCase())) &&
                       (item.total_current_streams || 0) >= minStreams &&
                       (item.norwegian_share_percent || 0) >= minShare;
            });

            if (sortBy === 'momentum_composite_score') {
                filteredData.sort((a, b) => a.originalRank - b.originalRank);
            } else {
                filteredData.sort((a, b) => {
                    const aVal = a[sortBy] || 0;
                    const bVal = b[sortBy] || 0;
                    return bVal - aVal;
                });
            }

            updateTable(filteredData);
        }

        function initialize() {
            artistData = parseCSV(csvData);
            filteredData = [...artistData];
            
            populateArtistFilter(artistData);
            applyFilters();

            document.getElementById('artistFilter').addEventListener('change', applyFilters);
            document.getElementById('minStreams').addEventListener('input', applyFilters);
            document.getElementById('minShare').addEventListener('input', applyFilters);
            document.getElementById('sortBy').addEventListener('change', applyFilters);
        }

        document.addEventListener('DOMContentLoaded', initialize);
    </script>
</body>
</html>
